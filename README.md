# Humanoid Robot Control System

Control system for a humanoid robot built with a Raspberry Pi Zero W and PCA9685 servo controller.

## Table of Contents
- [Hardware Requirements](#hardware-requirements)
- [Software Architecture](#software-architecture)
- [Getting Started](#getting-started)
  - [Installation](#installation)
  - [Wiring](#wiring)
  - [Launching the System](#launching-the-system)
  - [Calibration](#calibration)
- [Control Methods](#control-methods)
  - [Command Line Interface](#command-line-interface)
  - [Web Interface](#web-interface)
- [Docker Support](#docker-support)
- [Customization](#customization)
- [Troubleshooting](#troubleshooting)
- [Safety Notes](#safety-notes)
- [Contributing](#contributing)

## Hardware Requirements

- Raspberry Pi Zero W (or any Raspberry Pi with WiFi)
- PCA9685 16-channel PWM/Servo controller
- 13 servo motors in a humanoid configuration
- Power supply for servos (separate from Raspberry Pi power)
- Jumper wires for connections

## Software Architecture

The system consists of four main Python modules:

1. **robot_controller.py**: Core control module for servo movements
2. **web_server.py**: Flask web server providing API and web interface
3. **calibration.py**: Interactive tool for servo calibration
4. **start.py**: Menu-driven launcher for various system components

## Getting Started

### Installation

1. Clone this repository:
   ```bash
   git clone https://github.com/yourusername/robot.git
   cd robot
   ```

2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

### Wiring

Connect the PCA9685 to the Raspberry Pi:
- SDA to GPIO2 (Pin 3)
- SCL to GPIO3 (Pin 5)
- VCC to 3.3V
- GND to GND

Power the servo power rail with a suitable power supply (not from the Pi).

### Launching the System

Use the start script, which provides a menu-based interface:

```bash
# On Raspberry Pi/Linux/macOS:
python3 start.py

# On Windows:
python start.py
```

The start script allows you to:
- Start the web interface
- Run the command-line controller
- Launch the calibration tool
- Check and install dependencies
- View your Raspberry Pi's IP address

### Calibration

Before using the robot, calibrate the servos:

```bash
python calibration.py
```

This interactive tool will help you:
- Test all servos
- Determine the neutral positions for each servo
- Save calibration data for use in the main controller

## Control Methods

### Command Line Interface

Run the main robot controller directly:

```bash
python robot_controller.py
```

### Web Interface

Run the web server to control your robot through a browser:

```bash
python web_server.py
```

Then open a web browser and navigate to:
```
http://raspberry-pi-ip:5000
```

Replace `raspberry-pi-ip` with the IP address of your Raspberry Pi. This address is displayed when you run start.py.

The web interface provides:
- Easy initialization and shutdown
- Individual servo control with sliders
- One-click "Stand Up" and "Walk" functions

## Docker Support

The system can be run in a Docker container with hardware access:

1. Build the Docker image:
   ```bash
   docker-compose build
   ```

2. Run the container:
   ```bash
   docker-compose up
   ```

This will start the web server inside a container with access to GPIO and I2C hardware.

## Customization

You can modify the following files to customize your robot:

- `robot_controller.py`: Core movement functions and servo configurations
- `web_server.py`: API endpoints for web control
- `templates/index.html`: Web interface layout and design
- `servo_calibration.py`: (Generated by calibration tool) Custom servo positions

### Adding New Movements

To add a new movement sequence:

1. Add a new function to `robot_controller.py`
2. Add a corresponding API endpoint in `web_server.py`
3. Add UI elements to `templates/index.html` if needed

## Troubleshooting

- **Servo not moving**: 
  - Check wiring and power supply
  - Verify I2C connection with `i2cdetect -y 1`

- **Erratic movement**: 
  - Ensure adequate power supply for all servos
  - Check for loose connections

- **Robot falling**: 
  - Adjust servo positions and timing in movement sequences
  - Recalibrate servos to better positions

- **Web interface not working**: 
  - Make sure Flask is installed and the server is running
  - Check network connection and firewall settings

## Safety Notes

- Always power off the robot before making wiring changes
- Start with slow movements and gradually increase speed
- Be prepared to disconnect power if robot behaves unexpectedly
- Keep fingers clear of moving parts

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

---

## License

This project is licensed under the MIT License - see the LICENSE file for details.